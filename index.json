
[{"content":" Why using those \u0026ldquo;speakers\u0026rdquo; ? # This is a great starting point! I know this -Logitech Z906- audio system is considered as garbage by the hifi community, but I\u0026rsquo;ve been using it since 2013 (time pass) and I\u0026rsquo;m quite happy with. I know, there\u0026rsquo;s no HDMI-ARC I/O, no CEC, and it breaks easily. I mean, look at this power supply?\nI had to repair it multiple times because factory components heat up a lot and it causes the system to pop loudly during use, or it simply doesn\u0026rsquo;t start. Fortunately, I have all the necessary equipment at home to work on electronic and it\u0026rsquo;s quite easy to repair when you have the nomenclature.\nI hate throwing objects when the repair costs less than few bucks (which is mostly the case). But this system is not convenient at all as it was made for using it with a computer, not as a living-room sound system. When I wanted to listen to music, I had to turn on my TV (connected via S/PDIF), then use the Spotify app, and adjust the volume using its remote control. It was \u0026ldquo;fine\u0026rdquo; during a time, but I noticed that my TV draws 120 W of power. What made me decide to tweak this system was that I switched to Apple Music ‚Äîthere being no Android TV app‚Äî which meant I couldn‚Äôt use it for listening to music :(\nAdding Airplay functionnality # Ok, so the first thing to do is simply use Airplay, right? But how?\nThat\u0026rsquo;s where I love the open-source community ü§ç\nFirst test # I have a bunch of Raspberry Pi sitting on my desk, and I did not know what to do with them since most of my home services are on my homelab. So I grabbed the less power hungry -and less powerful- RasPi I had (4B), looked on GitHub for Airplay projects, and found this. Quickly runned a test, connect it on 3.5 mm input and voil√†!\nUnfortunately, RasPi\u0026rsquo;s built-in audio jack output sounds quite awful. To make things better, just add an external DAC such as the PiFi DAC+ v2.0:\nUse external DAC # Raspbian (RaspberryPi Linux based distro) uses alsa as audio driver. Using an external DAC requires some configuration to use it as the default output. First, connect via SSH and check if your DAC is correctly detected:\n$ cat /proc/asound/cards 0 [Headphones ]: bcm2835_headpho - bcm2835 Headphones bcm2835 Headphones 1 [sndrpihifiberry]: HifiberryDacp - snd_rpi_hifiberry_dacplus snd_rpi_hifiberry_dacplus 2 [vc4hdmi ]: vc4-hdmi - vc4-hdmi vc4-hdmi As you can see, there\u0026rsquo;s three audio outputs: built-in jack, DAC and HDMI. To use output n¬∞1 (DAC) as default, do:\n# touch /etc/asound.conf # nano /etc/asound.conf defaults.pcm.card 1 defaults.ctl.card 1 then restart your Pi. Try using Airplay, it should play sound on DAC\u0026rsquo;s output.\nBeing lazy requires work # So far, so good, you‚Äôve added AirPlay connectivity to your speakers really easily. But who wants to get out of the couch, turn on the audio system, change input and set volume? I certainly would not.\nFurthermore, I lost my Z906\u0026rsquo;s remote, so I need to use my Shield TV remote to turn on/off the system, but it also turn on the TV. The solution would be to control everything through Home Assistant. This will allow us to create automation with Airplay.\nConfigure Shairport-Sync # If you followed this guide to install shairport-sync on your Pi, at the Build and install step, change the configuration flags to add MQTT functionnalities:\n$ git clone https://github.com/mikebrady/shairport-sync.git $ cd shairport-sync $ autoreconf -fi $ ./configure --sysconfdir=/etc --with-alsa \\ --with-soxr --with-avahi --with-ssl=openssl --with-systemd --with-airplay-2 --with-mqtt-client $ make # make install The flag --with-mqtt-client should use the auto-discovery method and appears automatically in your Home Assistant devices under MQTT.\nControl the Z906 with an ESP32 # The Logitech Z906 works as follow: the main system is located inside the subwoofer, and control commands are done via the console. In order to catch and emulate commands, we need to be between the console and the sub. Thanks to nomis\u0026rsquo;s work and zarpli\u0026rsquo;s work who reverse-engineered, lots of people understood how to interface with the system using any device with serial communication capabilities, such as Pi, ESP 32/8266, Arduino and so on.\nThis project does exactly what I wanted: intercept commands and send them via MQTT.\nNevertheless, there isn\u0026rsquo;t any functionality to turn it on/off, since that requires some soldering.\nAdd power control # First thing to do is modify Jupsi\u0026rsquo;s code to add power functions. I\u0026rsquo;ll not cover every modifications, but there\u0026rsquo;s two important things to cover: autodiscovery and power handler. Using serial commands to control power is not possible, we\u0026rsquo;ll need to simulate a press on the power button located in front of the console.\nTo display a power button on Home Assistant, we need to tell our MQTT Broker that there\u0026rsquo;s such functionnality by adding this function to z906_autodiscover.cpp:\nvoid Z906::_AutoDiscovery_Power_Button(MQTT *mqttClient) { StaticJsonDocument\u0026lt;512\u0026gt; doc = Z906::_Helper_BuildBaseAutoDisocvery( \u0026#34;Power Button\u0026#34;, \u0026#34;Z906_Power_Button\u0026#34;, \u0026#34;homeassistant/button/z906/power_button/state\u0026#34;, \u0026#34;homeassistant/button/z906/power_button/set\u0026#34;); String payload; serializeJson(doc, payload); mqttClient-\u0026gt;Publish(\u0026#34;homeassistant/button/power_button/config\u0026#34;, payload.c_str(), true); } This will return the power state and control.\nNext, we need to handle MQTT message to control GPIO on our ESP32. To do this, I modified z906_onmqttmessage.cpp:\nvoid Z906::_OnMQTTMessage_SetPower_Button(MQTT* mqttClient, const char* message) { //Power Button Broker Message Handle Serial.println(\u0026#34;Power Button Pressed\u0026#34;); //Trigger the Power Button digitalWrite(POWER_PIN, HIGH); delay(300); digitalWrite(POWER_PIN, LOW); } This will simply close our circuit between POWER_PIN and GND, simulating a pressed button. Unfortunately, we cannot directly solder our ESP32 to the power button. The proper way to do this is by using an optocoupler (a basic PC817 for example) to completely isolate both systems, as current going through the power pin and ground could damage the console:\nYou can look at the project on the GitHub repo: OllieeeChap/logi_z906_HA Logitech Z906 WiFi MQTT ESP32 with Full Console functionality and Home Assistant C\u0026#43;\u0026#43; 0 0 Connect everything # Now that we have our code and our schematic, time to inhale soldering tin\u0026rsquo;s smoke (I know it\u0026rsquo;s not good for me but don\u0026rsquo;t worry, my fan was besides me)! This took quite a moment as there is a lot of cable, and DE-15 connector were cheap, so the quality was not there, but I managed to do everything:\nMake some automations # AirPlay remote control and state ? Check\nLogitech Z906 remote control and state ? Check\nThe only thing left to do is simply automate the process using Home Assistant, which is very easily with latest versions. The flowchart is as below:\nThat\u0026rsquo;s it ! # Everything is done ! I did more automations, especially turning it off when I\u0026rsquo;m leaving home or put my headphones. There\u0026rsquo;s a lot of possibility : building a multiroom audio system by making my own speakers, use the Z906 as an alarm siren (trust me, it can be reaaally loud), or even install Music Assistant as a docker container on my homelab and manage my own music library while connecting all my different services.\nI‚Äôm really happy to have integrated those speakers into my home automation system, and I‚Äôll add or modify more and more of what I own for greater laziness ;)\n","date":"9 October 2025","externalUrl":null,"permalink":"/projects/z906/","section":"Projects","summary":"Refurbished a dumb home-cinema setup and make it smart","title":"LogiWifi","type":"projects"},{"content":"","date":"9 October 2025","externalUrl":null,"permalink":"/","section":"o//ie","summary":"","title":"o//ie","type":"page"},{"content":" Experience Company Role Date LAAS-CNRS Embedded systems PhD 2024 - 2025 INSA Toulouse PhD teaching assistant 2024 - 2025 Expleo Embedded systems engineer 2023 - 2024 CEA CESTA Embedded systems internship 2019 - 2022 Electronic internship 2019 Education School Degree Date ENSEIRB-MatMeca Embedded systems master's degree 2019 - 2022 IUT Nantes University degree in electronic and informatic 2017 - 2019 Showa Senior High School Intercultural Program in Japan with AFS 2016 - 2017 Volunteering Association Role Date Clar-T Communication and health support 2024 - 2025 AFS Supervision and support for future AFSers 2015 - 2020 ","date":"30 August 2024","externalUrl":null,"permalink":"/resume/","section":"o//ie","summary":"","title":"Resume","type":"page"},{"content":" What is Zoomies ? # During the end of July 2024, one of the biggest Game Jam in the world happened. Some friends and I decided to give it a try, some without any knowledge in game developing (including me).\nAt friday evening, we met and discovered the theme of this year : Build to Scale\nVery soon, lots of ideas came to our mind. Should we build a game about scolarship ? About how democracy works ? And then\u0026hellip; cats. Why cats ? Because who doesn\u0026rsquo;t like cats ? And what people likes more than cats ? Videoconference (ok this one came into my mind without knowing why, don\u0026rsquo;t ask me how my brain works).\nThe story # You\u0026rsquo;re hired in a company who sells a videoconference software (like Zoom, you get it ? Cat ? Zoom ?) built with AI that automatically focus on user\u0026rsquo;s face. But there\u0026rsquo;s a problem\u0026hellip; They didn\u0026rsquo;t hire a developer. So you have to manually do the job, because you\u0026rsquo;re waaay cheaper than an AI developer. If you\u0026rsquo;re fast enough, people will start to notice, and you\u0026rsquo;ll be fired. Act quickly !\nHow it was developed # Despite great tools, you\u0026rsquo;ll need a great team We\u0026rsquo;re a team of 5 : 2 dealt with coding, 2 with graphics and story and the last one with sound. As you know (or maybe not ?), I usually do bip boup on my computer, so I was coding.\nGame engine # We used the famous Godot Engine, which I just discovered 1 hour before starting the jam. It uses different views : 2D/3D scene, and script. The 2D/3D allows us to place our assets where we want, put a camera, paint, etc\u0026hellip; and the script view connects everything together : what this button does, how life points are managed, how fast you\u0026rsquo;ll be fired\u0026hellip;\nZoomies looks like a 2D game, but is in fact multiple 3D \u0026ldquo;games\u0026rdquo; (with 2D assets) inside a 2D game. It was this part where we really strugle to implement. It\u0026rsquo;s easy to to 2D inside 3D, but the other way around is something else. But we managed (thanks to my team mate\u0026rsquo;s incredible skills) to have something nice !\nAssets # Having code is great, but if you have nothing to show, it\u0026rsquo;ll get pretty boring. Just look at our first cat :\n(I actually love them)\nBut players wants something cuter. That\u0026rsquo;s where our famous artists did a great job with those beautifuls assets :\nThere\u0026rsquo;s a lot more, so don\u0026rsquo;t hesitate to play to find them all !\nDialogue # Another part of the game was the dialogues. Remember, you\u0026rsquo;re hired to fix user\u0026rsquo;s camera, but they don\u0026rsquo;t know you\u0026rsquo;re watching them. We tried to make this part really fun and it was one of the most appreciated !\nMusic # Everything you hear during the game was homemade ! The music, the meow meow meow\u0026hellip; everything ! Fun fact, when cats are saying meow, it was recorded in a bedroom with someone saying multiple times meow.\nAt the end # Finally, the game is over (ok it was not the game but rather the jam\u0026rsquo;s timer). pfiou People\u0026rsquo;s seems to like it !\nso as the score !!\nThere was 7643 published games, it means we are in the 7% top games üéâ (with a high score for creativity)\nWhat\u0026rsquo;s next ? # Our team was awesome, it was really fun during those four days. So expect us to develop new games :)\nI forgot, here\u0026rsquo;s the link to play !\nPlay Zoomies ","date":"20 July 2024","externalUrl":null,"permalink":"/projects/zoomies/","section":"Projects","summary":"The funniest game you could play for GMTK 24'","title":"Zoomies","type":"projects"},{"content":"","date":"13 June 2022","externalUrl":null,"permalink":"/projects/","section":"Projects","summary":"","title":"Projects","type":"projects"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":"","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"}]